---
title: 桩识图
date: 2025-07-04 14:00:00
tags:
 - 建筑
 - CAD
typora-root-url: ..
typora-copy-images-to: ../img/cad
---

# 一种建筑图纸中桩的识别方法和装置

## 技术领域

人工智能、图像处理，建筑审图

## 技术背景

在结构工程审图领域，桩平面图的自动识别面临以下严峻挑战：1. 图纸上桩的画法多样，2. 单张图纸中桩结构高度密集，3. 受墙体和柱子等其他建筑元素的严重干扰，这使得传统的基于规则的检测方法显得力不从心，无法满足现代建筑审图的高精度与效率需求。

## 解决的技术问题

本项目通过创新性地结合基于规则和深度学习的算法，实现了高效、准确的桩检测。相较于基于规则的传统方法，本方法检测效率提高3倍，召回率提高了30%，准确率达到99%，显著优化了检测效果。通过自研自动化数据生成，自监督训练方案，替代完全依赖人工标注的传统方式，降低大量标注成本。总体来看，本项目实现了从无到有的技术突破，为结构检测带来了新的赋能。

## 技术方案

### 1. 总体流程

- 基于规则的桩检测
  - 采用基于规则的方法检测桩，检测时不区分桩类别。确保绝对准确率（100%），保持较高召回率（>60%）。
- 生成桩检测数据集
  - 利用规则检测的结果作为标注，生成桩检测数据集【pile_v0.1】。
- 模型训练
  - 使用YOLO算法，在桩检测数据集上训练初步的桩检测模型【model_v0.1】。
- 自监督训练
  - 运用已训练模型检测基于规则无法识别的图纸，将高置信度结果纳入训练集继续训练。

### 2. 基于规则的桩检测

#### 过滤干扰线

- 根据长度、直径和面积限制进行过滤。
- 只保留特定类型的几何元素：直线、多段线、圆、椭圆、圆弧、实体、填充。

#### 桩检测规则

- 导出图像并求连通域。
- 圆检测：识别圆、特定条件下的多段线和圆弧、椭圆。
- 矩形检测：利用最近邻算法确定矩形。
- 交叉线检测：扫描线算法检测交叉线。
- 填充检测：检查填充是否位于圆或矩形内。
- 多次应用连通域分析，提升准确率。

### 3. 生成桩检测数据集

- 依据规则检测结果生成桩边界框（bbox）。
- 导出原始及过滤后的图纸图像，扩大数据规模和多样性。
- 以640x640滑动窗口，20%重叠，切割图像。
- 转换bbox至图像坐标系，并映射至小图坐标系。
- 筛选含bbox的小图，构建训练集。

### 4. 模型训练

- 选用YOLOv8n作为桩检测模型。
- 调整数据集至YOLOv8所需格式，修改配置文件。
- 加载预训练权重，设置batch=32，epoch=120，进行训练。
- 输出桩检测模型【model_v0.1】。

### 5. 自监督训练

- 测试集使用规则检测遗漏的桩，由【model_v0.1】进行检测。
- 高置信度检测结果作为新标签，与【pile_v0.1】合并成【pile_v0.2】。
- 在【pile_v0.2】上继续训练，产出【model_v0.2】。
- 重复步骤，循环5轮，持续迭代模型。

### 6. 后处理

+ 切片检测结果合并
+ 基于cad原始图元，检测闭合多边形轮廓或圆形轮廓
+ 检测桩定位线
+ 验证区域内是否有满足条件的图元
+ 筛选误召回的检测
+ 引线检测匹配标注属性



![image-20250704142805784](/img/cad/image-20250704142759573.png)